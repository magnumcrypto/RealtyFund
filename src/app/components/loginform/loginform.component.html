<!-- Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <!-- START FORM FROM HERE -->
            <section class="user">
                <div class="user_options-container">
                    <div class="user_options-text">
                        <!-- Label for registration -->
                        <div class="user_options-unregistered">
                            @if (isLogin) {
                            <h2 class="user_unregistered-title">¡Bienvenido!</h2>
                            <p [ngStyle]="{'color': isLogin ? '#198754': ''}" class="user_unregistered-text">Gracias por
                                iniciar sesión, ahora puedes empezar a invertir con nosotros.</p>
                            }@else if(!errorStatusLogin) {
                            <h2 class="user_registered-title">No existe el usuario</h2>
                            <p [ngStyle]="{'color': !isRegistred ? '#dc3545': ''}" class="user_registered-text">Primero
                                debe de crear una cuenta.</p>
                            }@else {
                            <h2 class="user_unregistered-title">¿No tienes cuenta?</h2>
                            <p class="user_unregistered-text">Regístrate para poder ser de los primeros en enterarte de
                                todas las novedades.</p>
                            }
                            <div class="row"><button class="user_unregistered-signup" id="signup-button"
                                    (click)="onSignUp()">Sign
                                    up</button></div>
                            <div (click)="resetForm()" class="row"><button class="user_unregistered-signup" id="signout"
                                    data-bs-dismiss="modal">Cerrar</button></div>
                        </div>
                        <!-- Label for login -->
                        <div class="user_options-registered">
                            @if (isRegistred) {
                            <h2 class="user_registered-title">¡Bienvenido!</h2>
                            <p [ngStyle]="{'color': isRegistred ? '#198754': ''}" class="user_registered-text">Gracias
                                por registrarte, ahora puedes iniciar sesión y empezar a invertir
                                con nosotros.</p>
                            }@else if(!errorStatus) {
                            <h2 class="user_registered-title">¡Ups! Hubo un error</h2>
                            <p [ngStyle]="{'color': !isRegistred ? '#dc3545': ''}" class="user_registered-text">Parece
                                que este usuario ya está registrado.</p>
                            }@else {
                            <h2 class="user_registered-title">¿Tienes una cuenta?</h2>
                            <p class="user_registered-text">Inicia sesión y empieza a invertir.</p>
                            }
                            <div class="row">
                                <button class="user_registered-login" id="login-button"
                                    (click)="onLogin()">Login</button>
                            </div>
                            <div class="row">
                                <button (click)="resetForm()" class="user_unregistered-signup" id="signout2"
                                    data-bs-dismiss="modal">Cerrar</button>
                            </div>
                        </div>
                    </div>
                    <div class="user_options-forms" id="user_options-forms">
                        <div class="user_forms-login">
                            <h2 class="forms_title">Login</h2>
                            <!-- Form for LOGIN -->
                            <form (ngSubmit)="onLoginSubmit()" [formGroup]="loginFormGroup" class="forms_form"
                                method="post">
                                <fieldset class="forms_fieldset">
                                    <div class="forms_field">
                                        <input formControlName="username" type="email" placeholder="Email"
                                            class="forms_field-input" required autofocus />
                                    </div>
                                    <div class="forms_field">
                                        <div style="position: relative;">
                                            <input formControlName="password" type={{inputPassType}}
                                                placeholder="Contraseña" class="forms_field-input" required />
                                            <img (mouseup)="hidePass(1)" (mousedown)="showPass(1)"
                                                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfklEQVR4nO2ZTU8TURSGn0rSRBF2ghuKS/wDutBEI+hSVrrWhcofQBGXZjQxcaELsRD8Ga51h4DuNbFY2bkCwRSwSc1NTpOTk6l05vbOtMk8yU0nOZ33nPt17sdAQUFBQb9zDqgC20ATaElpAFEP9J+JVlu3Kb7eApO+4jeA30rclj1P/ZJodNLfBWZ8Wv5/wfeqByLTA3GVqKQRriqRGnANKBOeMjANbCn/S2mEtpWACz5rppX/ehoBPWGzaHlL2UzsxOhxmBctnxgGvgINlW3youETQyQ5uttUOQrcBlaADeAXcCDFPa8Dy8AtYCRQDKk4C7w+ZkGyxa0vr4BxcuaBLDTdBh63SN3LI/ATslexAa0B88AlYExSYVmeLwMPgU8x7y3JtiKz4FdMAF+BKwk0rgLfjMayaAfniXG8CpxU9tPyn8/AvpRNYFFsbU4B74yWey8oF4G/ymHVdP15WfY7jfkfwJT6f0lavm0/Ai6ECr4k6bHt7AMwZNJorYuJ+92k0SHgo7Kvh5oPs8qJGxYTxr5o0uRdSZPj8qy35gvm3QrwR9lvhqjAe+XAnaIsX5T9fox9TtndnLA8V3bnq+fsq52hbX1MC56JsY+ZHrRMqB2w70kvlkiGwdMOdt8KdOMjKHoIuRU66RDKncdmEt+RbDMSM4kf0YeMSopMmkb7iilzGLelZhayvmRYhtOGZJM9eV4QW2a8lJPQiyyd9jKGQ+l295sXhz4xDPyhvjXoFWgO+sXWz5yvFmfMOSIx+sy7JYJZXe5eN+vJmzRCk8fcOIT6wNEyZSft9TrS6rs5fuDYkVtqLyrShfVAn5iimE9MdfGZuuULCgoKyIR/sDpsPo82hUQAAAAASUVORK5CYII="
                                                style="width: 20px; position: absolute; right: 5px; top: 50%; transform: translateY(-50%); cursor: pointer;" />
                                        </div>
                                    </div>
                                </fieldset>
                                <div class="forms_buttons">
                                    <input [ngClass]="{'hidden': !isHidden}" type="submit" value="Log In"
                                        class="forms_buttons-action">
                                    <div [ngClass]="{'hidden': isHidden}" style="color: #0c74ba;"
                                        class="spinner-border one" role="status">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="user_forms-signup">
                            <h2 class="forms_title">Sign Up</h2>
                            <!-- Form for REGISTRATION -->
                            <form (ngSubmit)="onRegisterSubmit()" [formGroup]="registerFormGroup" class="forms_form">
                                <fieldset class="forms_fieldset">
                                    <div class="forms_field">
                                        <input
                                            [ngStyle]="{ 'border': registerFormGroup.get('username')?.valid ? '1px solid #198754' : '' }"
                                            type="email" placeholder="Email" class="forms_field-input" required
                                            formControlName="username" />
                                        @if (registerFormGroup.get('username')?.errors?.['pattern']) {
                                        <p class="alerts" style="color: #dc3545;">Formato de email inválido</p>
                                        }
                                    </div>
                                    <div class="forms_field">
                                        <input
                                            [ngStyle]="{ 'border': registerFormGroup.get('nickname')?.valid ? '1px solid #198754' : '' }"
                                            type="text" placeholder="Username" class="forms_field-input" required
                                            formControlName="nickname" />
                                        @if (registerFormGroup.get('nickname')?.errors?.['minlength']) {
                                        <p class="alerts" style="color: #dc3545;">Mínimo 5 caracteres</p>
                                        }
                                        @if (registerFormGroup.get('nickname')?.errors?.['maxlength']) {
                                        <p class="alerts" style="color: #dc3545;">Máximo 15 caracteres</p>
                                        }
                                    </div>
                                    <div class="forms_field">
                                        <div style="position: relative;">
                                            <input
                                                [ngStyle]="{ 'border': registerFormGroup.get('password')?.valid ? '1px solid #198754' : '' }"
                                                type={{inputPassType}} placeholder="Contraseña"
                                                class="forms_field-input" required formControlName="password" />
                                            <img (mouseup)="hidePass(1)" (mousedown)="showPass(1)"
                                                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfklEQVR4nO2ZTU8TURSGn0rSRBF2ghuKS/wDutBEI+hSVrrWhcofQBGXZjQxcaELsRD8Ga51h4DuNbFY2bkCwRSwSc1NTpOTk6l05vbOtMk8yU0nOZ33nPt17sdAQUFBQb9zDqgC20ATaElpAFEP9J+JVlu3Kb7eApO+4jeA30rclj1P/ZJodNLfBWZ8Wv5/wfeqByLTA3GVqKQRriqRGnANKBOeMjANbCn/S2mEtpWACz5rppX/ehoBPWGzaHlL2UzsxOhxmBctnxgGvgINlW3youETQyQ5uttUOQrcBlaADeAXcCDFPa8Dy8AtYCRQDKk4C7w+ZkGyxa0vr4BxcuaBLDTdBh63SN3LI/ATslexAa0B88AlYExSYVmeLwMPgU8x7y3JtiKz4FdMAF+BKwk0rgLfjMayaAfniXG8CpxU9tPyn8/AvpRNYFFsbU4B74yWey8oF4G/ymHVdP15WfY7jfkfwJT6f0lavm0/Ai6ECr4k6bHt7AMwZNJorYuJ+92k0SHgo7Kvh5oPs8qJGxYTxr5o0uRdSZPj8qy35gvm3QrwR9lvhqjAe+XAnaIsX5T9fox9TtndnLA8V3bnq+fsq52hbX1MC56JsY+ZHrRMqB2w70kvlkiGwdMOdt8KdOMjKHoIuRU66RDKncdmEt+RbDMSM4kf0YeMSopMmkb7iilzGLelZhayvmRYhtOGZJM9eV4QW2a8lJPQiyyd9jKGQ+l295sXhz4xDPyhvjXoFWgO+sXWz5yvFmfMOSIx+sy7JYJZXe5eN+vJmzRCk8fcOIT6wNEyZSft9TrS6rs5fuDYkVtqLyrShfVAn5iimE9MdfGZuuULCgoKyIR/sDpsPo82hUQAAAAASUVORK5CYII="
                                                style="width: 20px; position: absolute; right: 5px; top: 50%; transform: translateY(-50%); cursor: pointer;" />
                                        </div>
                                        @if (registerFormGroup.get('password')?.errors?.['minlength']) {
                                        <p class="alerts" style="color: #dc3545;">Mínimo 8 caracteres</p>
                                        }
                                        @if (registerFormGroup.get('password')?.errors?.['pattern']) {
                                        <p class="alerts" style="color: #dc3545;">Debe contener mínimo una mayúscula, un
                                            número y un
                                            carácter especial</p>
                                        }
                                    </div>
                                    <div class="forms_field">
                                        <div style="position: relative;">
                                            <input
                                                [ngStyle]="{ 'border': (registerFormGroup.get('confirmPassword')?.valid && isTheSame) ? '1px solid #198754' : '' }"
                                                id="confirmPasswordField" type={{inputConfirmPassType}}
                                                placeholder="Confirmar contraseña" class="forms_field-input" required
                                                formControlName="confirmPassword" />
                                            <img (mouseup)="hidePass(0)" (mousedown)="showPass(0)"
                                                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfklEQVR4nO2ZTU8TURSGn0rSRBF2ghuKS/wDutBEI+hSVrrWhcofQBGXZjQxcaELsRD8Ga51h4DuNbFY2bkCwRSwSc1NTpOTk6l05vbOtMk8yU0nOZ33nPt17sdAQUFBQb9zDqgC20ATaElpAFEP9J+JVlu3Kb7eApO+4jeA30rclj1P/ZJodNLfBWZ8Wv5/wfeqByLTA3GVqKQRriqRGnANKBOeMjANbCn/S2mEtpWACz5rppX/ehoBPWGzaHlL2UzsxOhxmBctnxgGvgINlW3youETQyQ5uttUOQrcBlaADeAXcCDFPa8Dy8AtYCRQDKk4C7w+ZkGyxa0vr4BxcuaBLDTdBh63SN3LI/ATslexAa0B88AlYExSYVmeLwMPgU8x7y3JtiKz4FdMAF+BKwk0rgLfjMayaAfniXG8CpxU9tPyn8/AvpRNYFFsbU4B74yWey8oF4G/ymHVdP15WfY7jfkfwJT6f0lavm0/Ai6ECr4k6bHt7AMwZNJorYuJ+92k0SHgo7Kvh5oPs8qJGxYTxr5o0uRdSZPj8qy35gvm3QrwR9lvhqjAe+XAnaIsX5T9fox9TtndnLA8V3bnq+fsq52hbX1MC56JsY+ZHrRMqB2w70kvlkiGwdMOdt8KdOMjKHoIuRU66RDKncdmEt+RbDMSM4kf0YeMSopMmkb7iilzGLelZhayvmRYhtOGZJM9eV4QW2a8lJPQiyyd9jKGQ+l295sXhz4xDPyhvjXoFWgO+sXWz5yvFmfMOSIx+sy7JYJZXe5eN+vJmzRCk8fcOIT6wNEyZSft9TrS6rs5fuDYkVtqLyrShfVAn5iimE9MdfGZuuULCgoKyIR/sDpsPo82hUQAAAAASUVORK5CYII="
                                                style="width: 20px; position: absolute; right: 5px; top: 50%; transform: translateY(-50%); cursor: pointer;" />
                                        </div>
                                        @if (isTheSame === false) {
                                        <p class="alerts" style="color: #dc3545;">Las contraseñas deben coincidir.</p>
                                        }
                                    </div>
                                </fieldset>
                                <div class="forms_buttons">
                                    <input [ngClass]="{'hidden': !isHidden}" type="submit" value="Sign up"
                                        class="forms_buttons-action">
                                    <div [ngClass]="{'hidden': isHidden}" style="color: #0c74ba;" class="spinner-border"
                                        role="status">
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>